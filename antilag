--[[
  Script Anti-Lag Gabungan dengan GUI
  Deskripsi: GUI minimalis dengan dua pilihan mode anti-lag.
             - V1: Mode performa dasar.
             - V2: Mode performa lanjutan (oleh RIP#6666).
--]]

-- =============================================
-- BAGIAN PEMBUATAN GUI (ANTARMUKA GRAFIS)
-- =============================================

-- 1. Membuat container utama untuk GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AntiLagGUIMulti"
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
screenGui.ResetOnSpawn = false

-- 2. Membuat Frame (jendela utama)
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 240, 0, 160) -- Ukuran disesuaikan untuk 2 tombol
mainFrame.Position = UDim2.new(0.5, -120, 0.5, -80)
mainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
mainFrame.BorderSizePixel = 1
mainFrame.BorderColor3 = Color3.fromRGB(100, 100, 120)
mainFrame.Draggable = true
mainFrame.Active = true
mainFrame.Parent = screenGui

local uiCornerFrame = Instance.new("UICorner")
uiCornerFrame.CornerRadius = UDim.new(0, 8)
uiCornerFrame.Parent = mainFrame

-- 3. Membuat Judul
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0, 30)
titleLabel.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
titleLabel.Text = "Pilihan Anti-Lag"
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.TextSize = 16
titleLabel.Parent = mainFrame

local uiCornerTitle = Instance.new("UICorner")
uiCornerTitle.CornerRadius = UDim.new(0, 8)
uiCornerTitle.Parent = titleLabel

-- 4. Tombol Close (X)
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 20, 0, 20)
closeButton.Position = UDim2.new(1, -25, 0, 5)
closeButton.BackgroundColor3 = titleLabel.BackgroundColor3
closeButton.Text = "X"
closeButton.Font = Enum.Font.SourceSansBold
closeButton.TextColor3 = Color3.fromRGB(220, 220, 220)
closeButton.TextSize = 16
closeButton.BackgroundTransparency = 1
closeButton.Parent = titleLabel

-- 5. Tombol untuk Anti-Lag V1
local buttonV1 = Instance.new("TextButton")
buttonV1.Name = "ButtonV1"
buttonV1.Size = UDim2.new(0, 200, 0, 45)
buttonV1.Position = UDim2.new(0.5, -100, 0, 40)
buttonV1.BackgroundColor3 = Color3.fromRGB(80, 120, 200)
buttonV1.Text = "Aktifkan Anti-Lag V1"
buttonV1.Font = Enum.Font.SourceSansBold
buttonV1.TextColor3 = Color3.fromRGB(255, 255, 255)
buttonV1.TextSize = 16
buttonV1.Parent = mainFrame

local uiCornerButton1 = Instance.new("UICorner")
uiCornerButton1.CornerRadius = UDim.new(0, 6)
uiCornerButton1.Parent = buttonV1

-- 6. Tombol untuk Anti-Lag V2
local buttonV2 = Instance.new("TextButton")
buttonV2.Name = "ButtonV2"
buttonV2.Size = UDim2.new(0, 200, 0, 45)
buttonV2.Position = UDim2.new(0.5, -100, 0, 100)
buttonV2.BackgroundColor3 = Color3.fromRGB(200, 80, 80)
buttonV2.Text = "Aktifkan Anti-Lag V2"
buttonV2.Font = Enum.Font.SourceSansBold
buttonV2.TextColor3 = Color3.fromRGB(255, 255, 255)
buttonV2.TextSize = 16
buttonV2.Parent = mainFrame

local uiCornerButton2 = Instance.new("UICorner")
uiCornerButton2.CornerRadius = UDim.new(0, 6)
uiCornerButton2.Parent = buttonV2

-- =============================================
-- FUNGSI ANTI-LAG V1 (SCRIPT PERTAMA)
-- =============================================

local function aktifkanAntiLagV1()
    local function kirimNotifikasi(judul, teks, durasi)
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = judul,
            Text = teks,
            Duration = durasi or 5,
        })
    end

    local Lighting = game:GetService("Lighting")
    local Workspace = game:GetService("Workspace")
    local Terrain = Workspace:FindFirstChildWhichIsA("Terrain")

    if Terrain then
        Terrain.WaterWaveSize = 0
        Terrain.WaterWaveSpeed = 0
        Terrain.WaterReflectance = 0
        Terrain.WaterTransparency = 1
    end

    Lighting.GlobalShadows = false
    Lighting.FogEnd = 9e9
    Lighting.FogStart = 9e9

    pcall(function()
        settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
    end)

    for _, v in pairs(game:GetDescendants()) do
        if v:IsA("BasePart") then
            v.CastShadow = false
            v.Material = Enum.Material.Plastic
            v.Reflectance = 0
        elseif v:IsA("Decal") or v:IsA("Texture") then
            v.Transparency = 1
        elseif v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") or v:IsA("Fire") or v:IsA("Sparkles") then
            v.Enabled = false
        end
    end

    for _, v in pairs(Lighting:GetDescendants()) do
        if v:IsA("PostEffect") then
            v.Enabled = false
        end
    end

    Workspace.DescendantAdded:Connect(function(child)
        task.spawn(function()
            if child:IsA("BasePart") then
                child.CastShadow = false
                child.Material = Enum.Material.Plastic
                child.Reflectance = 0
            elseif child:IsA("Decal") or child:IsA("Texture") then
                child.Transparency = 1
            elseif child:IsA("ParticleEmitter") or child:IsA("Trail") or child:IsA("Smoke") or child:IsA("Fire") or child:IsA("Sparkles") or child:IsA("PostEffect") then
                child.Enabled = false
            end
        end)
    end)

    kirimNotifikasi("Anti-Lag V1 Diaktifkan", "Mode performa dasar telah aktif.", 7)
end

-- =============================================
-- FUNGSI ANTI-LAG V2 (SCRIPT KEDUA OLEH RIP#6666)
-- CATATAN: Skrip ini dirancang untuk lingkungan eksekutor (exploit)
--          dan mungkin menampilkan error jika dijalankan di Studio biasa.
-- =============================================

local function aktifkanAntiLagV2()
    -- Pengaturan default dari script asli
    if not _G.Ignore then
        _G.Ignore = {}
    end
    if _G.SendNotifications == nil then
        _G.SendNotifications = true
    end
    if _G.ConsoleLogs == nil then
        _G.ConsoleLogs = false
    end
    if not _G.Settings then
        _G.Settings = {
            Players = { ["Ignore Me"] = true, ["Ignore Others"] = true, ["Ignore Tools"] = true },
            Meshes = { NoMesh = false, NoTexture = false, Destroy = false },
            Images = { Invisible = true, Destroy = false },
            Explosions = { Smaller = true, Invisible = false, Destroy = false },
            Particles = { Invisible = true, Destroy = false },
            TextLabels = { LowerQuality = false, Invisible = false, Destroy = false },
            MeshParts = { LowerQuality = true, Invisible = false, NoTexture = false, NoMesh = false, Destroy = false },
            Other = { ["FPS Cap"] = true, ["No Camera Effects"] = true, ["No Clothes"] = true, ["Low Water Graphics"] = true, ["No Shadows"] = true, ["Low Rendering"] = true, ["Low Quality Parts"] = true, ["Low Quality Models"] = true, ["Reset Materials"] = true, ["Lower Quality MeshParts"] = true, ClearNilInstances = false }
        }
    end

    local Players, Lighting, StarterGui, MaterialService = game:GetService("Players"), game:GetService("Lighting"), game:GetService("StarterGui"), game:GetService("MaterialService")
    local ME, CanBeEnabled = Players.LocalPlayer, {"ParticleEmitter", "Trail", "Smoke", "Fire", "Sparkles"}

    local function PartOfCharacter(Inst)
        for i, v in pairs(Players:GetPlayers()) do
            if v ~= ME and v.Character and Inst:IsDescendantOf(v.Character) then return true end
        end
        return false
    end

    local function DescendantOfIgnore(Inst)
        for i, v in pairs(_G.Ignore) do
            if Inst:IsDescendantOf(v) then return true end
        end
        return false
    end

    local function CheckIfBad(Inst)
        if not Inst:IsDescendantOf(Players) and (_G.Settings.Players["Ignore Others"] and not PartOfCharacter(Inst) or not _G.Settings.Players["Ignore Others"]) and (_G.Settings.Players["Ignore Me"] and ME.Character and not Inst:IsDescendantOf(ME.Character) or not _G.Settings.Players["Ignore Me"]) and (_G.Settings.Players["Ignore Tools"] and not Inst:IsA("BackpackItem") and not Inst:FindFirstAncestorWhichIsA("BackpackItem") or not _G.Settings.Players["Ignore Tools"]) and (_G.Ignore and not table.find(_G.Ignore, Inst) and not DescendantOfIgnore(Inst) or (not _G.Ignore or type(_G.Ignore) ~= "table" or #_G.Ignore <= 0)) then
            if Inst:IsA("DataModelMesh") then
                if Inst:IsA("SpecialMesh") then
                    if _G.Settings.Meshes.NoMesh then Inst.MeshId = "" end
                    if _G.Settings.Meshes.NoTexture then Inst.TextureId = "" end
                end
                if _G.Settings.Meshes.Destroy or _G.Settings["No Meshes"] then Inst:Destroy() end
            elseif Inst:IsA("FaceInstance") then
                if _G.Settings.Images.Invisible then Inst.Transparency = 1; Inst.Shiny = 1 end
                if _G.Settings.Images.LowDetail then Inst.Shiny = 1 end
                if _G.Settings.Images.Destroy then Inst:Destroy() end
            elseif Inst:IsA("ShirtGraphic") then
                if _G.Settings.Images.Invisible then Inst.Graphic = "" end
                if _G.Settings.Images.Destroy then Inst:Destroy() end
            elseif table.find(CanBeEnabled, Inst.ClassName) then
                if _G.Settings["Invisible Particles"] or _G.Settings["No Particles"] or (_G.Settings.Other and _G.Settings.Other["Invisible Particles"]) or (_G.Settings.Particles and _G.Settings.Particles.Invisible) then Inst.Enabled = false end
                if (_G.Settings.Other and _G.Settings.Other["No Particles"]) or (_G.Settings.Particles and _G.Settings.Particles.Destroy) then Inst:Destroy() end
            elseif Inst:IsA("PostEffect") and (_G.Settings["No Camera Effects"] or (_G.Settings.Other and _G.Settings.Other["No Camera Effects"])) then
                Inst.Enabled = false
            elseif Inst:IsA("Explosion") then
                if _G.Settings["Smaller Explosions"] or (_G.Settings.Other and _G.Settings.Other["Smaller Explosions"]) or (_G.Settings.Explosions and _G.Settings.Explosions.Smaller) then Inst.BlastPressure = 1; Inst.BlastRadius = 1 end
                if _G.Settings["Invisible Explosions"] or (_G.Settings.Other and _G.Settings.Other["Invisible Explosions"]) or (_G.Settings.Explosions and _G.Settings.Explosions.Invisible) then Inst.BlastPressure = 1; Inst.BlastRadius = 1; Inst.Visible = false end
                if _G.Settings["No Explosions"] or (_G.Settings.Other and _G.Settings.Other["No Explosions"]) or (_G.Settings.Explosions and _G.Settings.Explosions.Destroy) then Inst:Destroy() end
            elseif Inst:IsA("Clothing") or Inst:IsA("SurfaceAppearance") or Inst:IsA("BaseWrap") then
                if _G.Settings["No Clothes"] or (_G.Settings.Other and _G.Settings.Other["No Clothes"]) then Inst:Destroy() end
            elseif Inst:IsA("BasePart") and not Inst:IsA("MeshPart") then
                if _G.Settings["Low Quality Parts"] or (_G.Settings.Other and _G.Settings.Other["Low Quality Parts"]) then Inst.Material = Enum.Material.Plastic; Inst.Reflectance = 0 end
            elseif Inst:IsA("TextLabel") and Inst:IsDescendantOf(workspace) then
                if _G.Settings["Lower Quality TextLabels"] or (_G.Settings.Other and _G.Settings.Other["Lower Quality TextLabels"]) or (_G.Settings.TextLabels and _G.Settings.TextLabels.LowerQuality) then Inst.Font = Enum.Font.SourceSans; Inst.TextScaled = false; Inst.RichText = false; Inst.TextSize = 14 end
                if _G.Settings["Invisible TextLabels"] or (_G.Settings.Other and _G.Settings.Other["Invisible TextLabels"]) or (_G.Settings.TextLabels and _G.Settings.TextLabels.Invisible) then Inst.Visible = false end
                if _G.Settings["No TextLabels"] or (_G.Settings.Other and _G.Settings.Other["No TextLabels"]) or (_G.Settings.TextLabels and _G.Settings.TextLabels.Destroy) then Inst:Destroy() end
            elseif Inst:IsA("Model") then
                if _G.Settings["Low Quality Models"] or (_G.Settings.Other and _G.Settings.Other["Low Quality Models"]) then Inst.LevelOfDetail = 1 end
            elseif Inst:IsA("MeshPart") then
                if _G.Settings["Low Quality MeshParts"] or (_G.Settings.Other and _G.Settings.Other["Low Quality MeshParts"]) or (_G.Settings.MeshParts and _G.Settings.MeshParts.LowerQuality) then Inst.RenderFidelity = 2; Inst.Reflectance = 0; Inst.Material = Enum.Material.Plastic end
                if _G.Settings["Invisible MeshParts"] or (_G.Settings.Other and _G.Settings.Other["Invisible MeshParts"]) or (_G.Settings.MeshParts and _G.Settings.MeshParts.Invisible) then Inst.Transparency = 1; Inst.RenderFidelity = 2; Inst.Reflectance = 0; Inst.Material = Enum.Material.Plastic end
                if _G.Settings.MeshParts and _G.Settings.MeshParts.NoTexture then Inst.TextureID = "" end
                if _G.Settings.MeshParts and _G.Settings.MeshParts.NoMesh then Inst.MeshId = "" end
                if _G.Settings["No MeshParts"] or (_G.Settings.Other and _G.Settings.Other["No MeshParts"]) or (_G.Settings.MeshParts and _G.Settings.MeshParts.Destroy) then Inst:Destroy() end
            end
        end
    end

    if not game:IsLoaded() then game.Loaded:Wait() end
    if _G.SendNotifications then StarterGui:SetCore("SendNotification", { Title = "Anti-Lag V2", Text = "Memulai FPS Booster...", Duration = 5, Button1 = "OK" }) end

    pcall(function() if (_G.Settings["Low Water Graphics"] or (_G.Settings.Other and _G.Settings.Other["Low Water Graphics"])) then local t = workspace:WaitForChild("Terrain", 9e9); t.WaterWaveSize = 0; t.WaterWaveSpeed = 0; t.WaterReflectance = 0; t.WaterTransparency = 0; if sethiddenproperty then sethiddenproperty(t, "Decoration", false) end end end)
    pcall(function() if _G.Settings["No Shadows"] or (_G.Settings.Other and _G.Settings.Other["No Shadows"]) then Lighting.GlobalShadows = false; Lighting.FogEnd = 9e9; Lighting.ShadowSoftness = 0; if sethiddenproperty then sethiddenproperty(Lighting, "Technology", 2) end end end)
    pcall(function() if _G.Settings["Low Rendering"] or (_G.Settings.Other and _G.Settings.Other["Low Rendering"]) then settings().Rendering.QualityLevel = 1; settings().Rendering.MeshPartDetailLevel = Enum.MeshPartDetailLevel.Level04 end end)
    pcall(function() if _G.Settings["Reset Materials"] or (_G.Settings.Other and _G.Settings.Other["Reset Materials"]) then for i, v in pairs(MaterialService:GetChildren()) do v:Destroy() end; MaterialService.Use2022Materials = false end end)
    pcall(function() if _G.Settings["FPS Cap"] or (_G.Settings.Other and _G.Settings.Other["FPS Cap"]) then if setfpscap then local cap = _G.Settings["FPS Cap"] or (_G.Settings.Other and _G.Settings.Other["FPS Cap"]); if type(cap) == "string" or type(cap) == "number" then setfpscap(tonumber(cap)) elseif cap == true then setfpscap(1e6) end end end end)
    pcall(function() if _G.Settings.Other["ClearNilInstances"] then if getnilinstances then for _, v in pairs(getnilinstances()) do pcall(v.Destroy, v) end end end end)

    local Descendants = game:GetDescendants()
    if _G.SendNotifications then StarterGui:SetCore("SendNotification", { Title = "Anti-Lag V2", Text = "Memeriksa " .. #Descendants .. " objek...", Duration = 10, Button1 = "OK" }) end
    
    for i, v in pairs(Descendants) do CheckIfBad(v) end
    
    if _G.SendNotifications then StarterGui:SetCore("SendNotification", { Title = "Anti-Lag V2", Text = "FPS Booster V2 telah aktif!", Duration = 7, Button1 = "OK" }) end

    game.DescendantAdded:Connect(function(value) task.wait(_G.LoadedWait or 1); CheckIfBad(value) end)
end

-- =============================================
-- KONEKSI EVENT (SAAT TOMBOL DIKLIK)
-- =============================================

-- Menghubungkan fungsi ke tombol V1
buttonV1.MouseButton1Click:Connect(function()
    aktifkanAntiLagV1()
    
    -- Memberi feedback visual dan menonaktifkan tombol
    buttonV1.Text = "V1 Telah Aktif"
    buttonV1.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    buttonV1.Active = false
end)

-- Menghubungkan fungsi ke tombol V2
buttonV2.MouseButton1Click:Connect(function()
    aktifkanAntiLagV2()
    
    -- Memberi feedback visual dan menonaktifkan tombol
    buttonV2.Text = "V2 Telah Aktif"
    buttonV2.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    buttonV2.Active = false
end)

-- Menghubungkan fungsi untuk menutup GUI ke tombol "X"
closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)
